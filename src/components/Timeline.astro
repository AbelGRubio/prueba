---
// src/components/Timeline.astro
interface Positions {
    title: string;
    responsibilities: string[]
}

interface TimelineItem {
  title: string;
  date: string;
  positions: Positions[];
}

interface Props {
  items: TimelineItem[];
  iconColor?: string;
  lineColor?: string;
  darkMode?: boolean;
}

const {
  items = [],
  iconColor = "text-blue-800 dark:text-blue-300",
  lineColor = "bg-gray-200 dark:bg-gray-700",
  darkMode = true
} = Astro.props;

// √çcono por defecto (calendario)
const defaultIcon = {
  path: "M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z",
  viewBox: "0 0 20 20"
};

const timelineEvents = [
  {
    date: 'Present - 2025',
    title: 'Freelancer',
    positions: [
      {
        title: 'Senior Full Stack Developer',
        responsibilities: [
          'Developed scalable web applications using Astro and React.',
          'Optimized backend APIs with Python and FastAPI.',
        ]
      },
      {
        title: 'Technical Consultant',
        responsibilities: [
          'Advised startups on architecture and deployment.',
          'Built MVPs in record time with clean, reusable code.'
        ]
      }
    ]
  },
  {
    date: 'Present - 2024',
    title: 'Santander Bank / NovaQuality',
    positions: [
      {
        title: 'Senior Python Developer',
        responsibilities: [
          'Refactored and optimized core banking services in production, leveraging SonarQube to detect code smells, enforce quality gates, and enhance long-term maintainability.',
          'Integrated microservices architecture with Python and FastAPI, streamlining backend processes, reducing API response time through SOLID principles'
        ]
      }
    ]
  },
{
  date: '2024-2023',
  title: 'Brainy',
  positions: [{
    title: "Senior Backend developer",
    responsibilities: [
        'Used SonarQube to ensure code quality and guide the development of a scalable microservices architecture.',
        'Automated CI/CD pipelines using GitLab, reducing deployment time by 50% and increasing release frequency.',
        'Integrated Keycloak as an identity provider across microservices, implementing OAuth2/OIDC flows and securing API communication against common authentication vulnerabilities.'
    ]
  }]
},
{
    date: '2023-2019',
    title: 'Aragon Photonics Labs',
    positions: [
        {
            title: "(2023 - 2021) Lead R&D Engineer",
            responsibilities: [
                "Led a 5-person technical team, managing AI-driven research projects in collaboration with universities",
                "Optimized real-time signal processing algorithms, increasing data analysis speed by 85% in photonic devices.",
                "Developed and maintained a Dockerized microservices architecture}, improving software scalability and deployment efficiency.",
                "Managed GitLab CI/CD workflows, reducing software release cycles from 3 weeks to 1 week."
            ]
        },
        {
            title: "(2021 - 2020) R&D Engineer",
            responsibilities: [
                "Designed and implemented high-performance data processing pipelines, reducing computational time for seismic and audio data analysis by 40%",
                "Applied SOLID and TDD principles to refactor legacy code, improving maintainability and test coverage.",
                "Processed terabytes of real-time data, enabling advanced analytics in photonic measurement systems."
            ]
        },
        {
            title: "(2020 - 2019) Project Engineer",
            responsibilities: []
        }
    ]
    },
    {
        date: '2017',
        title: "Efor, Internet and technology",
        positions: [{
            title: "Data analyst",
            responsibilities: []
        }]
    },
        {
        date: '2016',
        title: "Kampal Data Solutions, BIFI, L.S.",
        positions: [{
            title: "Intership",
            responsibilities: []
        }]
    },
//   {
//     date: '2016',
//     title: 'Kampal Data Solutions, BIFI, L.S.',
//     content: 'The winners will be contacted by our team and the winning goodies will be sent to their addresses.'
//   }
];

---
<section class="py-12 max-w-6xl mx-auto">


    <div class="container mx-auto flex flex-col items-start md:flex-row ">
    <div class="flex flex-col w-full sticky md:top-36 lg:w-1/3 mt-2 md:mt-12 px-8 z-10">
    <p class="ml-2 uppercase tracking-loose">From Physics to Full-Stack</p>
    <p class="text-3xl md:text-4xl leading-normal md:leading-relaxed mb-2"> My Professional Journey</p>
    <p class="text-sm md:text-base mb-4 ">
  A chronological overview of my experience, from academic foundations to full-stack development. Each step represents a milestone in my growth as a software engineer.

    </p>
    </div>
    <div class="ml-0 lg:w-2/3 sticky">
    <div class="container mx-auto w-full h-full">
        <div class="relative wrap overflow-hidden p-10 h-full">
        <div class="border-2-2 border-yellow-555 absolute h-full border"
            style="border: 4px solid #FFC100; border-radius: 1%;"></div>

{timelineEvents.map((event) => (
  <div class="mb-8 ml-8 w-full">
    <div class="order-1 px-1 py-4 text-left">
      <p class="mb-3 text-base text-yellow-300">{event.date}</p>
      <h4 class="mb-3 font-bold text-lg md:text-2xl">{event.title}</h4>

      {event.positions?.map((position: any) => (
        <div class="mb-4">
          <h5 class="font-semibold ">{position.title}</h5>
          <ul class="list-disc pl-6 text-sm space-y-1 mt-1">
            {position.responsibilities.map((task: any) => (
              <li>{task}</li>
            ))}
          </ul>
        </div>
      ))}
    </div>
  </div>
))}

        </div>
        <img class="mx-auto md:-ml-40 " src="https://user-images.githubusercontent.com/54521023/116968861-ef21a000-acd2-11eb-95ac-a34b5b490265.png" />
    </div>
    </div>
    </div>
</section>
